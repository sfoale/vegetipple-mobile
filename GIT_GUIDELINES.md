# Git Repository Guidelines

## ‚úÖ **What SHOULD be committed**

### **Source Code & Configuration**
- `src/` - All TypeScript, HTML, SCSS source files
- `package.json` & `package-lock.json` - Dependencies
- `angular.json` - Angular CLI configuration
- `capacitor.config.ts` - Capacitor configuration
- `ionic.config.json` - Ionic project settings
- `tsconfig*.json` - TypeScript configuration

### **Documentation**
- `README.md` - Project documentation
- `*.md` files - Setup guides and documentation
- `scripts/` - Helper scripts (like keystore generation)

### **GitHub Actions**
- `.github/workflows/` - CI/CD pipeline definitions

### **Android Native Structure (Essential Files Only)**
- `android/variables.gradle` - Dependency versions
- `android/capacitor.settings.gradle` - Capacitor settings
- `android/app/capacitor.build.gradle` - Capacitor build config
- Basic Android project structure files

### **Source Assets**
- `src/assets/barnivore.db` - Original database file
- `src/assets/icon/` - App icons
- Static assets that are part of your source

## ‚ùå **What should NOT be committed**

### **Generated/Built Files**
- `www/` - Built web assets (generated by `npm run build`)
- `android/app/src/main/assets/public/` - **Copied web assets**
- `android/app/src/main/assets/capacitor.*.json` - **Generated config files**
- `node_modules/` - Dependencies (npm installs these)

### **Android Build Artifacts**
- `android/**/build/` - Compiled Android files
- `android/**/.gradle/` - Gradle cache
- `android/**/gradlew*` - Gradle wrapper (auto-generated)
- `*.apk`, `*.aab` - Built Android packages
- `android/**/local.properties` - Local Android SDK paths

### **Security-Sensitive Files**
- `*.keystore`, `*.jks` - **App signing keys**
- `google-services.json` - **Firebase/Google services config**
- `.env*` - **Environment variables with secrets**
- Any files containing API keys or passwords

### **IDE & System Files**
- `.DS_Store`, `Thumbs.db` - OS-generated files
- `.vscode/`, `.idea/` - IDE configurations (except shared settings)
- `*.log` - Log files

## üîÑ **Workflow: What Happens When**

### **During Development**
1. You modify files in `src/`
2. `npm run build` generates `www/` ‚ú® (ignored by Git)
3. `npx cap sync` copies `www/` to `android/app/src/main/assets/public/` ‚ú® (ignored by Git)

### **In CI/CD (GitHub Actions)**
1. Checks out source code from Git
2. Runs `npm install` to get dependencies
3. Runs `npm run build` to generate `www/`
4. Runs `npx cap sync` to copy to Android
5. Builds Android APK/AAB files

### **Key Principle**
**Never commit generated files** - they should be reproducible from source code.

## üîß **Current .gitignore Status**

Your `.gitignore` now correctly excludes:

```bash
# ‚úÖ Generated web assets
/www
/android/app/src/main/assets/public
/android/app/src/main/assets/capacitor.config.json
/android/app/src/main/assets/capacitor.plugins.json

# ‚úÖ Build artifacts
android/**/build/
*.apk
*.aab

# ‚úÖ Security files
*.keystore
*.jks
google-services.json

# ‚úÖ Dependencies
/node_modules
```

## üö® **Security Best Practices**

### **Never Commit These:**
1. **Keystores** - Used for app signing, losing these means you can't update your app
2. **API Keys** - Could be used maliciously if exposed
3. **Environment Variables** - Often contain sensitive configuration
4. **Google Services Files** - Contain project-specific credentials

### **Safe to Commit:**
1. **Source code** - Your TypeScript, HTML, SCSS files
2. **Configuration templates** - Without sensitive values
3. **Public assets** - Icons, images, documentation
4. **Build scripts** - GitHub Actions workflows

## üéØ **Recommended Git Commands**

### **Check what's about to be committed:**
```bash
git status
git diff --cached
```

### **If you accidentally stage sensitive files:**
```bash
git reset HEAD filename.keystore
git rm --cached -r android/app/src/main/assets/public/
```

### **Clean start after .gitignore updates:**
```bash
git rm -r --cached .
git add .
git commit -m "Update .gitignore and remove generated files"
```

## ‚úÖ **Repository Health Check**

Your repository should contain:
- ‚úÖ Source files (`src/`)
- ‚úÖ Configuration files
- ‚úÖ Documentation
- ‚úÖ GitHub Actions workflows
- ‚ùå **No generated files**
- ‚ùå **No security-sensitive files**
- ‚ùå **No build artifacts**

This ensures your repository is:
- **Secure** - No credentials exposed
- **Clean** - Only source code and documentation
- **Reproducible** - Anyone can build from source
- **Maintainable** - Clear separation of source vs. generated files